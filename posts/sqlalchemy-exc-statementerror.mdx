---
title: sqlalchemy greenlet_spawn error í•´ê²°
description: sqlalchemy.exc.StatementError (sqlalchemy.exc.MissingGreenlet) greenlet_spawn has not been called
tags: [SQLAlchemy]
author: mingke
thumbnail: /thumbnails/sqlalchemy-logo.png
date: 2023/11/14
---

<Image src="/thumbnails/sqlalchemy-logo.png" alt="FastAPI Logo" />

### Table of Contents

## ê°œìš”

FastAPI + ë¹„ë™ê¸° SQLAlchemyì‚¬ìš©í•˜ë‹¤ ì•„ë˜ì™€ ê°™ì€ ì—ëŸ¬ë¥¼ ë§Œë‚¬ìŠµë‹ˆë‹¤. ë³„ê±°ì•„ë‹ˆ ì—ëŸ¬ì¸ë° ì–´ì´ì—†ê²Œ ì‹œê°„ì„ ì¢€ ì¨ì„œ ê¸°ë¡í•©ë‹ˆë‹¤.

<Callout emoji="ğŸ’¡">
sqlalchemy.exc.StatementError: (sqlalchemy.exc.MissingGreenlet) greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place?

</Callout>

## í•´ê²°

ì´ëŸ° ì—ëŸ¬ë¥¼ ë§Œë‚¬ì„ ë•Œ expire_on_commit = Falseë¥¼ ì£¼ë‹ˆ ê°„ë‹¨í•˜ê²Œ í•´ê²°ë˜ì—ˆìŠµë‹ˆë‹¤.

```python
async_session = async_sessionmaker(
    connection, autoflush=False, autocommit=False, expire_on_commit=False
)
```

ìŠì–´ë²„ë ¸ì„ ê²½ìš° ì°¾ì•„ë³´ê¸° ìœ„í•´ ê¸°ë¡ì„ í•´ë†“ì•˜ìŠµë‹ˆë‹¤.
