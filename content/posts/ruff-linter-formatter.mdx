---
title: Ruff - Rustë¡œ ë§Œë“¤ì–´ì§„ Python linter&formatter ì•Œì•„ë³´ê¸°
description: Python í”„ë¡œì íŠ¸ë¥¼ ê´€ë¦¬í•˜ë‹¤ ë³´ë©´ ì½”ë“œ ìŠ¤íƒ€ì¼ì„ ì¼ê´€ë˜ê²Œ ìœ ì§€í•˜ëŠ” ê²ƒì´ ì¤‘ìš”í•©ë‹ˆë‹¤. ì´ê²ƒì„ ë„ì™€ì£¼ëŠ” íŒŒì´ì¬ì— ë‹¤ì–‘í•œ linterì™€ formatterê°€ ìˆìŠµë‹ˆë‹¤. ì €ëŠ” ê·¸ë™ì•ˆ flake8ê³¼ blackì˜ ì¡°í•©ìœ¼ë¡œ ì‚¬ìš©í•´ì™”ìŠµë‹ˆë‹¤. ê·¸ëŸ¬ë‹¤ê°€ ì´ë²ˆì— Ruffë¡œ ì˜®ê¸°ê²Œ ë˜ì–´ Ruffì— ëŒ€í•´ ê°„ë‹¨í•˜ê²Œ ì •ë¦¬í•´ë³´ë ¤ê³  í•©ë‹ˆë‹¤.
tags: [Python]
author: mingke
thumbnail: /thumbnails/python-logo.png
date: 2024/07/24
---

<Image src="/thumbnails/python-logo.png" alt="Python linter formatter ruff" />

### ëª©ì°¨

## Ruff

Python í”„ë¡œì íŠ¸ë¥¼ ê´€ë¦¬í•˜ë‹¤ ë³´ë©´ ì½”ë“œ ìŠ¤íƒ€ì¼ì„ ì¼ê´€ë˜ê²Œ ìœ ì§€í•˜ëŠ” ê²ƒì´ ì¤‘ìš”í•©ë‹ˆë‹¤. ì´ê²ƒì„ ë„ì™€ì£¼ëŠ” íŒŒì´ì¬ì— ë‹¤ì–‘í•œ linterì™€ formatterê°€ ìˆìŠµë‹ˆë‹¤. ì €ëŠ” ê·¸ë™ì•ˆ flake8ê³¼ blackì˜ ì¡°í•©ìœ¼ë¡œ ì‚¬ìš©í•´ì™”ìŠµë‹ˆë‹¤. ê·¸ëŸ¬ë‹¤ê°€ ì´ë²ˆì— Ruffë¡œ ì˜®ê¸°ê²Œ ë˜ì–´ Ruffì— ëŒ€í•´ ê°„ë‹¨í•˜ê²Œ ì •ë¦¬í•´ë³´ë ¤ê³  í•©ë‹ˆë‹¤.

RuffëŠ” Rustë¡œ ì‘ì„±ëœ linterì´ì formatterì…ë‹ˆë‹¤. flake8, blackë“± ê¸°ì¡´ ë¼ì´ë¸ŒëŸ¬ë¦¬ë“¤ì˜ ê·œì¹™ë“¤ì„ ëŒ€ë¶€ë¶„ ì§€ì›í•´ì„œ ruffí•˜ë‚˜ë§Œ ìˆì–´ë„ í”„ë¡œì íŠ¸ë¥¼ ê´€ë¦¬í•˜ëŠ”ë° ë¬¸ì œê°€ ì—†ìŠµë‹ˆë‹¤.

Ruff ê³µì‹ ì‚¬ì´íŠ¸ì— ê°€ì„œ ë³´ë©´ ë‹¤ìŒê³¼ ê°™ì´ í•œ ì¤„ ì„¤ëª…ì´ ìˆìŠµë‹ˆë‹¤.

<aside>
ğŸ’¡ An extremely fast Python linter and code formatter, written in Rust.

</aside>

ê·¸ë¦¬ê³  í˜„ì¡´í•˜ëŠ” Python linterì™€ formatterë“¤ ì¤‘ì— 10 ~ 100ë°° ì •ë„ ë¹ ë¥´ë‹¤ê³  í•©ë‹ˆë‹¤.

VSCodeê°™ì´ IDEì—ì„œë„ ì§€ì›í•˜ê¸° ë•Œë¬¸ì— ì‚¬ìš©í•˜ê¸°ë„ ì•„ì£¼ ì‰½ìŠµë‹ˆë‹¤. ì €ëŠ” ë³´í†µ pre-commitê³¼ ciì—ì„œ linterì™€ formatterë¥¼ ì‚¬ìš©í•˜ëŠ”ë°ìš”. ê·¸ê²ƒë„ ê°„ë‹¨í•˜ê²Œ ì •ë¦¬í•´ë³´ê² ìŠµë‹ˆë‹¤.

## Ruff ì‚¬ìš© ì˜ˆì‹œ

### pyproject.toml ì„¤ì •í•˜ê¸°

`pyproject.toml` ì´ë‚˜ `ruff.toml` ì— ì„¤ì •ì„ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì²˜ìŒ ì‚¬ìš©í•œë‹¤ë©´ êµ³ì´ ì„¤ì •ì—†ì´ ê¸°ë³¸ ì„¤ì •ë§Œ ê°€ì§€ê³ ë„ ì¶©ë¶„í•œ ê²ƒ ê°™ìŠµë‹ˆë‹¤. ì‚¬ìš©í•˜ë‹¤ê°€ í•„ìš”ì— ì˜í•´ í•˜ë‚˜ì”© ì ìš©í•´ë‚˜ê°€ë©´ ë  ê²ƒ ê°™ìŠµë‹ˆë‹¤.

```toml
# pyproject.toml
...
[tool.ruff]
line-length = 140 # ìµœëŒ€ ê¸¸ì´ë¥¼ 140ìœ¼ë¡œ ëŠ˜ë ¤ë´¤ìŠµë‹ˆë‹¤.

[tool.ruff.lint]
select = [
    "F",  # pyflakes
    "I",  # isort
    "UP",  # pyupgrade
]
ignore = ["E501"]
```

ì˜ˆì‹œë¡œ ì‘ì„±í•´ë³´ì•˜ëŠ”ë° ì•„ë˜ ë§í¬ì—ì„œ ë” ë§ì€ ì„¤ì •ì„ í™•ì¸í•´ë³´ì‹œê³  í•„ìš”í•œëŒ€ë¡œ ì‚¬ìš©í•˜ë©´ ë©ë‹ˆë‹¤.

<Link url="https://docs.astral.sh/ruff/configuration/" />

### CLIì—ì„œ ì‚¬ìš©í•˜ê¸°

ê¸°ë³¸ì ìœ¼ë¡œ pipë¡œ ì„¤ì¹˜í•˜ì—¬ clií™˜ê²½ì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```python
pip install ruff
```

í„°ë¯¸ë„ì—ì„œ ë‹¤ìŒê³¼ ê°™ì´ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```bash
ruff check --fix

ruff format
```

### pre-commitì—ì„œ ì‚¬ìš©í•˜ê¸°

ì €ëŠ” êµ³ì´ ì´ë ‡ê²Œ ì‚¬ìš©í•˜ì§€ ì•Šê³  pre-commitì— hookì„ ë“±ë¡í•˜ì—¬ ì‚¬ìš©í•©ë‹ˆë‹¤. pre-commitì—ì„œ ë‹¤ìŒê³¼ ê°™ì´ hookì„ ë“±ë¡í•©ë‹ˆë‹¤.

- ì˜ˆì‹œ

```yaml
# .pre-commit-config.yaml
repos:
  - repo: https://github.com/pre-commit/pre-commit-hooks
    rev: v4.6.0
    hooks:
      - id: trailing-whitespace
      - id: end-of-file-fixer
      - id: check-yaml
      - id: check-added-large-files
  - repo: https://github.com/astral-sh/ruff-pre-commit
    rev: v0.5.4
    hooks:
      - id: ruff
        args: [--fix]
      - id: ruff-format
```

ê¸°ì¡´ í”„ë¡œì íŠ¸ì—ì„œ `pre-commit run --all-files` ë¥¼ í•´ë³´ì•˜ìŠµë‹ˆë‹¤.

```bash
[INFO] Initializing environment for https://github.com/astral-sh/ruff-pre-commit.
[INFO] Installing environment for https://github.com/astral-sh/ruff-pre-commit.
[INFO] Once installed this environment will be reused.
[INFO] This may take a few minutes...
trim trailing whitespace.................................................Passed
fix end of files.........................................................Passed
check yaml...............................................................Passed
check for added large files..............................................Passed
ruff.....................................................................Passed
ruff-format..............................................................Failed
- hook id: ruff-format
- files were modified by this hook

4 files reformatted, 10 files left unchanged
```

### github actionsì—ì„œ ì‚¬ìš©í•˜ê¸°

marketplaceì— ruff actionì´ ìˆì—ˆìŠµë‹ˆë‹¤. marketplaceì— ìˆëŠ” ê²ƒì„ ì‚¬ìš©í•˜ë©´ ì‰½ê²Œ ì‚¬ìš©í•  ìˆ˜ ìˆì§€ ì‹¶ìŠµë‹ˆë‹¤.

```yaml
name: Ruff
on:
  pull_request:
    branches:
      - main

jobs:
  ruff:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - uses: chartboost/ruff-action@v1
```

ë˜ëŠ” shellscriptë¥¼ ë§Œë“¤ì–´ì„œ ì‚¬ìš©í•´ ë³¼ ìˆ˜ë„ ìˆê² ìŠµë‹ˆë‹¤. FastAPI ë ˆí¬ë¥¼ ì—¼íƒí•´ë´¤ë”ë‹ˆ lint.shë¥¼ ë§Œë“¤ì–´ì„œ CIì— ì‚¬ìš©ë˜ê³  ìˆëŠ” ê²ƒì„ í™•ì¸í–ˆìŠµë‹ˆë‹¤.

## ë§ˆë¬´ë¦¬

ruffë¥¼ ê°„ë‹¨í•˜ê²Œ ì •ë¦¬í•´ë³´ì•˜ìŠµë‹ˆë‹¤. ì €ëŠ” ì‚¬ìš©í•´ë³´ë‹ˆ ì‚¬ìš©í•˜ì§€ ì•Šì„ ì´ìœ ë¥¼ ëª»ì°¾ì•˜ë„¤ìš”. ìƒˆë¡­ê²Œ ì‹œì‘í•˜ëŠ” í”„ë¡œì íŠ¸ì—ì„œëŠ” ê°€ëŠ¥í•˜ë‹¤ë©´ ruffë¥¼ ì“¸ ê²ƒ ê°™ìŠµë‹ˆë‹¤. Rustë¥¼ ì£¼ë§ì— ì¡°ê¸ˆì”© ê³µë¶€í•˜ê³  ìˆëŠ”ë° ì‰½ì§€ ì•ŠìŠµë‹ˆë‹¤â€¦ ì–¸ì  ê°€ Rustë¡œ ruffê°™ì€ê±° ë§Œë“¤ì–´ë³´ê³  ì‹¶ë„¤ìš”.

<Link url="https://chaechae.life/blog/pre-commit-use-ormcamp" />
